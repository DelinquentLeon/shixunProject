<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<!-- 新 Bootstrap5 核心 CSS 文件 -->
		<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/5.1.1/css/bootstrap.min.css">
		<!--  popper.min.js 用于弹窗、提示、下拉菜单 -->
		<script src="https://cdn.staticfile.org/popper.js/2.9.3/umd/popper.min.js"></script>
		<!-- 最新的 Bootstrap5 核心 JavaScript 文件 -->
		<script src="https://cdn.staticfile.org/twitter-bootstrap/5.1.1/js/bootstrap.min.js"></script>
		<!-- Jquery -->
		<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
		<script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
		<script src="http://cdn.zaixianke.com/china.js"></script>
		<!-- Vue -->
		<script type="text/javascript" src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		<style>
			div{
				padding-top: 20px;
				margin: 0 auto;
			}
			#box{
				width: 50%; 
				height: 800px;
			}
			#zhu{
				width: 70%;
				height: 250px;
			}
			#panel, #flip {
				padding: 5px;
				text-align: center;
				background-color: #e5eecc;
				border: solid 1px #c3c3c3;
			}
			
			#panel {
				display: none;
			}
		</style>
		<script type="text/javascript">
			$(document).ready(function() {
				$("#flip").click(function() {
					$("#row").slideToggle("slow");
				});
			});
		</script>
	</head>
	<body>
		<div id="flip">点我，显示或隐藏面板。</div>
		<div class="row" id="row">
			<div class="col-sm-3">
				<div class="col-sm-3">tu</div>
				<div class="col-sm-3">tu</div>
				<div class="col-sm-3">1</div>
			</div>
			<div class="col-sm-6" id="box"></div>
			<div class="col-sm-3">
				<div class="col-sm-3" id="zhu"></div>
				<div id="app">
					<!-- `greet` 是在下面定义的方法名 -->
					<button type="button" class="btn btn-success" v-on:click="greet">查看男女的数量</button>
				</div>
				<div class="col-sm-3">1</div>
			</div>
		</div>
		
		
	    <script>
	        // 初始化echarts实例
	        var myEcharts_big = echarts.init(document.getElementById("box"));
			var myEcharts_4 = echarts.init(document.getElementById("zhu"));
			
			//中国地图
	        var option_big = {
	            title: {  //标题样式
	                text: '信息呈现舱',
	                x: "center",
	                textStyle: {
	                    fontSize: 18,
	                    color: "blue"
	                },
	            },
	            tooltip: {  //这里设置提示框
	                trigger: 'item',  //数据项图形触发
	                backgroundColor: "red",  //提示框浮层的背景颜色。
	                //字符串模板(地图): {a}（系列名称），{b}（区域名称），{c}（合并数值）,{d}（无）
	                formatter: '地区：{b}<br/>模拟数据：{c}'
	            },
	            visualMap: {//视觉映射组件
	                top: 'center',
	                left: 'left',
	                min: 10,
	                max: 500000,
	                text: ['High', 'Low'],
	                realtime: false,  //拖拽时，是否实时更新
	                calculable: true,  //是否显示拖拽用的手柄
	                inRange: {
	                    color: ['lightskyblue', 'yellow', 'orangered']
	                }
	            },
	            series: [
	                {
	                    name: '模拟数据',
	                    type: 'map',
	                    mapType: 'china',
	                    roam: false,//是否开启鼠标缩放和平移漫游
	                    itemStyle: {//地图区域的多边形 图形样式
	                        normal: {//是图形在默认状态下的样式
	                            label: {
	                                show: true,//是否显示标签
	                                textStyle: {
	                                    color: "black"
	                                }
	                            }
	                        },
	                        zoom: 1.5,  //地图缩放比例,默认为1
	                        emphasis: {//是图形在高亮状态下的样式,比如在鼠标悬浮或者图例联动高亮时
	                            label: { show: true }
	                        }
	                    },
	                    top: "3%",//组件距离容器的距离
	                    data: [
	                        { name: '北京', value: 350000 },
	                        { name: '天津', value: 120000 },
	                        { name: '上海', value: 300000 },
	                        { name: '重庆', value: 92000 },
	                        { name: '河北', value: 25000 },
	                        { name: '河南', value: 20000 },
	                        { name: '云南', value: 500 },
	                        { name: '辽宁', value: 3050 },
	                        { name: '黑龙江', value: 80000 },
	                        { name: '湖南', value: 2000 },
	                        { name: '安徽', value: 24580 },
	                        { name: '山东', value: 40629 },
	                        { name: '新疆', value: 36981 },
	                        { name: '江苏', value: 13569 },
	                        { name: '浙江', value: 24956 },
	                        { name: '江西', value: 15194 },
	                        { name: '湖北', value: 41398 },
	                        { name: '广西', value: 41150 },
	                        { name: '甘肃', value: 17630 },
	                        { name: '山西', value: 27370 },
	                        { name: '内蒙古', value: 27370 },
	                        { name: '陕西', value: 97208 },
	                        { name: '吉林', value: 88290 },
	                        { name: '福建', value: 19978 },
	                        { name: '贵州', value: 94485 },
	                        { name: '广东', value: 89426 },
	                        { name: '青海', value: 35484 },
	                        { name: '西藏', value: 97413 },
	                        { name: '四川', value: 54161 },
	                        { name: '宁夏', value: 56515 },
	                        { name: '海南', value: 54871 },
	                        { name: '台湾', value: 48544 },
	                        { name: '香港', value: 49474 },
	                        { name: '澳门', value: 34594 }
	                    ]
	                }
	            ]
	        };
			var option_4 = {
			    title: {
					x: 'left',
			        text: '男女数量'
			    },
			    tooltip: {},
			    legend: {
					x: 'right',
			        data:['数量']
			    },
			    xAxis: {
			        data: ["男","女"],
					fontSize:10
			    },
			    yAxis: {},
			    series: [{
			        name: '数量',
			        type: 'bar',
			        data: [0,0]
			    }]
			};
			
	        // 使用刚指定的配置项和数据显示图表。
	        myEcharts_big.setOption(option_big);
			
			var app = new Vue({
				el : '#app',
				data : {
					name : 'Vue.js'
				},
				// 在 `methods` 对象中定义方法
				methods : {
					greet : function() {
						console.log("进入了greet方法!");
							axios
							.get('getSexNum')
							.then(function (response){
								console.log("接收到response!");
								option_4.series[0].data=response.data;
								//重新渲染一下echars图
								myEcharts_4.setOption(option_4);
							})
							.catch(function (error) { // 请求失败处理
								console.log(error);
							});
					}
				}
			})
			// 也可以用 JavaScript 直接调用方法
			//app.greet() // -> 'Hello Vue.js!'
	    </script>
	</body>

</html>